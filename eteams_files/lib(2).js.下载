!function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t(require("weappUtils"),require("loadjs")):"function"===typeof define&&define.amd?define(["weappUtils","loadjs"],t):"object"===typeof exports?exports.weappEcodesdk=t(require("weappUtils"),require("loadjs")):e.weappEcodesdk=t(e.weappUtils,e.loadjs)}(this,(function(e,t){return function(e){function t(t){for(var o,i,a=t[0],u=t[1],l=t[2],d=0,f=[];d<a.length;d++)i=a[d],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&f.push(r[i][0]),r[i]=0;for(o in u)Object.prototype.hasOwnProperty.call(u,o)&&(e[o]=u[o]);for(t.originChunkName=t.originChunkName||"lib",s&&s(t);f.length;)f.shift()();return c.push.apply(c,l||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],o=!0,a=1;a<n.length;a++){var u=n[a];0!==r[u]&&(o=!1)}o&&(c.splice(t--,1),e=i(i.s=n[0]))}return e}var o={},r={0:0},c=[];function i(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=o,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/build/ecodesdk/",i.z="publicUrlweappEcodesdk",i.k="publicDomainweappEcodesdk";var a=this.webpackJsonpweappEcodesdk=this.webpackJsonpweappEcodesdk||[];this.webpackJsonpweappEcodesdk.push([[0],e]);var u=a.push.bind(a);a.push=t,a=a.slice();for(var l=0;l<a.length;l++)t(a[l]);var s=u;return c.push([13]),n()}([function(t,n){t.exports=e},function(e,n){e.exports=t},,,,function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",(function(){return o}))},function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function r(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}n.d(t,"a",(function(){return r}))},,function(e,t,n){"use strict";function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function i(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=o(e);if(t){var i=o(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c(this,n)}}n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function r(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}n.d(t,"a",(function(){return r}))},,,,function(e,t,n){"use strict";function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function r(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"===typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n.r(t),n.d(t,"ready",(function(){return y})),n.d(t,"loadAsyncReady",(function(){return h})),n.d(t,"version",(function(){return I})),n.d(t,"asyncImport",(function(){return D})),n.d(t,"jsonp",(function(){return R})),n.d(t,"relative",(function(){return A}));var u=n(1),l=n.n(u),s=n(0),d={};function f(e){Object.keys(e).forEach((function(t){d[t]||(d[t]={}),d[t].chunks=e[t]}))}function p(e){if(!e)return{_initjs:[],_initcss:[],_chunks:null};var t=e.initjs,n=void 0===t?[]:t,o=e.initcss,r=void 0===o?[]:o,c=e.chunks,i=void 0===c?{}:c,a=e.chunksRelease,u=e.initPrefix,l=e.chunksPrefix,d="PC"===s.ua.device?"init":"init_mobile",f=n.map((function(e){var t,n,o,r,c;return"".concat(u).concat((null===(t=e.split(","))||void 0===t?void 0:t[0])?(null===(n=e.split(","))||void 0===n?void 0:n[0])+"/":"").concat(d).concat((null===(o=e.split(","))||void 0===o?void 0:o[2])?"_"+(null===(r=e.split(","))||void 0===r?void 0:r[2]):"",".js?v=").concat(null===(c=e.split(","))||void 0===c?void 0:c[1])})),p=r.map((function(e){var t,n,o,r,c;return"".concat(u).concat((null===(t=e.split(","))||void 0===t?void 0:t[0])?(null===(n=e.split(","))||void 0===n?void 0:n[0])+"/":"").concat(d).concat((null===(o=e.split(","))||void 0===o?void 0:o[2])?"_"+(null===(r=e.split(","))||void 0===r?void 0:r[2]):"",".css?v=").concat(null===(c=e.split(","))||void 0===c?void 0:c[1])})),v={};return Object.keys(i).forEach((function(e){var t=i[e];Object.keys(t).forEach((function(n){var o,r;v[n]||(v[n]=["".concat(l).concat(e).concat(a).concat(n,"/index.js?v=").concat(null===(o=t[n].split(","))||void 0===o?void 0:o[0]),"".concat(l).concat(e).concat(a).concat(n,"/index.css?v=").concat(null===(r=t[n].split(","))||void 0===r?void 0:r[0])])}))})),{_initjs:f,_initcss:p,_chunks:v}}function v(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t){var n=p(e.load),o=n._initjs,c=n._initcss,i=n._chunks,u=p(e.common),l=u._initjs,s=u._initcss,d=u._chunks,f=e.load.chunksPrefix||e.common.chunksPrefix;return f&&window.localStorage.setItem("__ecode_chunks_prefix__",f),{chunks:a(a({},i),d),initjs:[].concat(r(o),r(l)),initcss:[].concat(r(c),r(s))}}var v=p(e.load),w=v._initjs,b=v._initcss,y=v._chunks,h=e.load.chunksPrefix,_=void 0===h?"":h;return _&&window.localStorage.setItem("__ecode_chunks_prefix__",_),{chunks:y,initjs:w,initcss:b}}function w(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=arguments.length>3?arguments[3]:void 0;if("[object Object]"===Object.prototype.toString.call(null===e||void 0===e?void 0:e.load)){var r=v(e,t);t&&window.localStorage.setItem("__ecode_data__timestamp",String((new Date).getTime())),f(r.chunks);var c="true"==window.localStorage.getItem("__ecode_data__status"),i=JSON.stringify(e),a=!1;if(i&&i!==o.ecode&&(window.localStorage.setItem("__ecode_data__",i),window.localStorage.setItem("__ecode_data__status",String(t)),a=!0),a&&(n||!o.ecode||c!=t)&&window.location.href.indexOf("wea_link_keep_ecode_noreload=1")<0)return void window.location.reload()}}function b(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Object(s.request)({url:"/".concat(t?"":"p","api/app/ecode/cache/global"),method:"get",params:{device:s.ua.device}}).then((function(n){var o,r;return w(null===n||void 0===n||null===(o=n.data)||void 0===o?void 0:o.ecode,t,null===n||void 0===n||null===(r=n.data)||void 0===r?void 0:r.refresh,e)})).catch((function(t){var n,o,r;Object(s.request)({url:null===(n=window.TEAMS)||void 0===n||null===(o=n.ecodeGlobalData)||void 0===o||null===(r=o.global)||void 0===r?void 0:r.globalAddress,method:"get"}).then((function(t){w({load:t},!1,!0,e)})).catch((function(e){return console.error(e)}));var c=Object(s.getReadyFailedHook)("@weapp/ecodesdk","initReady");"function"===typeof c&&c(t),console.error("ecode \u52a0\u8f7d\u51fa\u9519\uff1a",t)}))}function y(e){Object(s.regReadyHook)("@weapp/ecodesdk","initReady",e)}function h(){return new Promise((function(e,t){var n=v(JSON.parse(window.localStorage.getItem("__ecode_data__"))||{},window.ETEAMSID&&window.TEAMS),o=n.initjs,c=n.initcss,i=Object(s.appInfo)("@weapp/ecode").publicUrl,a=window.publicDomainfileEcode||"",u=c||[],d=(o||[]).map((function(e){return"".concat(a).concat(i).concat(e)})),f=u.map((function(e){return"".concat(a).concat(i).concat(e)})),p="__ecode_init__";l()([].concat(r(d),r(f)),p),l.a.ready(p,{success:function(){e({status:"success",loadKey:p})},error:function(t){e({status:"error",loadKey:p,err:t})}})}))}var _=/^((?:\.\.\/)*\.\.)$/,m=/^((?:\.\.\/)+)(.+)?$/;function g(e,t){return 1===t.length?O(e,1):"/"===t[1]?j(O(e,1),t.slice(2)):function(e,t){var n=_.exec(t);if(n)return O(e,1+(n[1].length+1)/3);if(n=m.exec(t)){var o=O(e,1+n[1].length/3);return null===o?null:j(o,n[2])}return null}(e,t)}function j(e,t){return t?e?("/"===e?e:e+"/")+t:t:e}function O(e,t){var n;if(t<=1){if((n=e.lastIndexOf("/"))<0)return""}else for(n=e.length;--t>=0;)if((n=n?e.lastIndexOf("/",n-1):-1)<0)return t||"/"===e[0]?null:"";return n?e.slice(0,n):"/"}var k={react:"React","react-dom":"ReactDOM","react-router-dom":"ReactRouterDOM",axios:"axios",mobx:"mobx","mobx-react":"mobxReact","mobx-react-lite":"mobxReactLite",loadjs:"loadjs"},S=function(e){return!e||/\.js$/.test(e)?e:"".concat(e,".js")};d.export=function(e,t,n){if(e&&/^[^.]/.test(t)&&"function"===typeof n)return d[e]||(d[e]={}),void(d[e][t]=n);console.error('Ecode export module failed: appId "'.concat(e,'", filePath "').concat(t,'"'))},d.require=function(e,t,n){if(e&&t&&/^[^.]/.test(t))if(t=S(t),!d[e]||n&&!/^\./.test(n)){if(n)if(/^@weapp\//.test(n)){var o=window[Object(s.appInfo)(n).libraryName];if(o)return o}else if(k[n]){var r=window[k[n]];if(r)return r}}else{var c,i=g(t,S(n||""))||t,a=null===(c=d[e])||void 0===c?void 0:c[i];if(a&&a.fetching)return console.error('Recycling applications are not supported.\nCannot access [appId "'.concat(e,'", filePath "').concat(t,'", relativePath "').concat(n,'"] before initialization.')),{};if(a&&a.exports)return a.exports;if("function"===typeof a){d[e][i].fetching=!0;var u=a(d.require);return d[e][i].exports=u,delete d[e][i].fetching,u}}console.error('Ecode require module failed: appId "'.concat(e,'", filePath "').concat(t,'", relativePath "').concat(n,'"'))};var E={},x={};function P(e,t,n){if(E[e].length)for(;E[e].length;){var o=n;if("resolve"===t){var r,c=E[e][0].key;(null===d||void 0===d||null===(r=d[e])||void 0===r?void 0:r[c])?o=d.require(e,c):(t="reject",console.error(o))}E[e][0][t](o),E[e].shift()}x[e]=!0}!function(){var e,t,n=Boolean(window.ETEAMSID&&window.TEAMS);if(window.localStorage.getItem("__ecode_data__")){var o=v(JSON.parse(window.localStorage.getItem("__ecode_data__"))||{},window.ETEAMSID&&window.TEAMS),r=o.chunks,c=o.initjs,i=o.initcss,a={ecode:window.localStorage.getItem("__ecode_data__"),js:c,css:i,chunks:r},u=Object(s.appInfo)("@weapp/ecode").publicUrl,l=window.publicDomainfileEcode||"";f(a.chunks||{});var d,p,w=a.css||[],y=a.js||[];if((null===(e=window.weaverSDK)||void 0===e||null===(t=e.isExternSystem)||void 0===t?void 0:t.call(e))||(y.forEach((function(e){return window.document.write('<script src="'.concat(l+u+e,'"><\/script>'))})),w.forEach((function(e){return window.document.write('<link rel="stylesheet" href="'.concat(l+u+e,'" />'))}))),n)null===(d=window.TEAMS)||void 0===d||null===(p=d.ready)||void 0===p||p.call(d,"ecodeGlobalData",{success:function(){var e,t,o;window.ECODE=null===(e=window.TEAMS)||void 0===e||null===(t=e.ecodeGlobalData)||void 0===t?void 0:t.global;var r=Object(s.getReadySuccessHook)("@weapp/ecodesdk","initReady");if("function"===typeof r&&r(window.ECODE),(null===(o=window.ECODE)||void 0===o?void 0:o.cacheTimeout)>0){var c,i=(new Date).getTime(),u=Number(window.localStorage.getItem("__ecode_data__timestamp"))||0;return i-Number(u)>=Number(null===(c=window.ECODE)||void 0===c?void 0:c.cacheTimeout)&&b(a,n),!1}b(a,n)},failed:function(e){throw new Error("ecodeGlobalData ready failed\uff1a"+e)}});else b(a,n)}else b({},n)}();var I="0.1.29",D=function(e,t,n){return new Promise((function(o,r){var c='Ecode async import() failed: appId "'.concat(e,'", filePath "').concat(t,'"');if(e&&/^[^.]/.test(t)){var i,a;if(t=S(t),null===d||void 0===d||null===(i=d[e])||void 0===i?void 0:i[t])return void o(d.require(e,t));if(x[e])return void r(c);var u=Object(s.appInfo)("@weapp/ecode").publicUrl,f=window.publicDomainfileEcode||"",p=window.localStorage.getItem("__ecode_chunks_prefix__")||"";if(n&&p){if(E[e])return void E[e].push({key:t,resolve:o,reject:r});E[e]=[{key:t,resolve:o,reject:r}];var v="__ecode_chunks_".concat(e,"__");return d[e]={chunks:["".concat(p,"simple/").concat(e,"/index.js?v=").concat((new Date).getTime()),"".concat(p,"simple/").concat(e,"/index.css?v=").concat((new Date).getTime())].map((function(e){return"".concat(f).concat(u).concat(e)}))},l()(d[e].chunks,v),void l.a.ready(v,{success:function(){P(e,"resolve",c)},error:function(t){P(e,"reject",'load simple app failed: appId "'.concat(e,'", "').concat(d[e].chunks,'"'))}})}if(null===d||void 0===d||null===(a=d[e])||void 0===a?void 0:a.chunks){var w='load chunk failed: appId "'.concat(e,'", "').concat(d[e].chunks,'"'),b={success:function(){P(e,"resolve",c)},error:function(t){P(e,"reject",w)}};if(E[e])return void E[e].push({key:t,resolve:o,reject:r});E[e]=[{key:t,resolve:o,reject:r}];var y="__ecode_chunks_".concat(e,"__"),h=d[e].chunks;return Array.isArray(h)&&h.length&&(h=h.map((function(e){return"".concat(f).concat(u).concat(e)}))),l()(h,y),void l.a.ready(y,b)}}console.error(c),r(c)}))},R=d,A=g}])}));
//# sourceMappingURL=lib.js.map?v=afb7e22e